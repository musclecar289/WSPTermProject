<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Edit Collection View</title>
    </h:head>
    <h:body>
        <h1>Welcome #{facesContext.externalContext.userPrincipal.name}</h1>
        <h:form id="editAlbumForm">
            <h3>Album List</h3>
            <h:message for="form" errorStyle="color:red"/>
            <p:dataTable id="editAlbumList" value="#{editCollectionBean.albums}" editable="true"
                         var="album" resizableColumns="true" rows="10" 
                         paginator="true" style="margin-bottom:20px" 
                         draggableColumns="true" paginatorPosition="bottom"
                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} 
                         {PageLinks} {NextPageLink} {LastPageLink} 
                         {RowsPerPageDropdown}" rowsPerPageTemplate="10,25,50,100">
                <f:facet name="header">  
                    Album List  
                </f:facet>
                <p:column headerText="Id" sortBy="#{album.albumID}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="albumID" value="#{album.albumID}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.albumID}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Title" sortBy="#{album.title}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="Title" value="#{album.title}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.title}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Artist" sortBy="#{album.artist}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="Artist" value="#{album.artist}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.artist}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Year" sortBy="#{album.releaseYear}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="Year" value="#{album.releaseYear}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.releaseYear}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Tracks" sortBy="#{album.numberOfTracks}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="Tracks" value="#{album.numberOfTracks}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.numberOfTracks}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Discs" sortBy="#{album.numberOfDiscs}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="Discs" value="#{album.numberOfDiscs}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.numberOfDiscs}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Genre" sortBy="#{album.genre}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="Genre" value="#{album.genre}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.genre}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Copies" sortBy="#{album.albumCount}">
                    <p:cellEditor>
                        <f:facet name="input"><h:inputText id="Copies" value="#{album.albumCount}"/></f:facet>                         
                        <f:facet name="output"><h:outputText value="#{album.albumCount}"/></f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column style="width:32px">
                    <p:rowEditor />
                </p:column>
                <p:column>
                    <f:facet name="header">Delete</f:facet>
                    <p:commandButton id="delete" value="Delete" update="editAlbumList "                                                    
                                     action="#{editCollectionBean.deleteAlbum(album.albumID, album.title)}">
                       
                    </p:commandButton>
                    <h:message for="delete" errorStyle="color: red" />
                </p:column>
                <p:column>
                    <f:facet name="header">Update</f:facet>
                    <p:commandButton id="update" value="Update" update ="editAlbumList "                                                    
                                     action="#{editCollectionBean.updateAlbum(album)}">
                       
                    </p:commandButton>
                    <h:message for="delete" errorStyle="color: red" />
                </p:column>

            </p:dataTable>
            <p:commandButton value="Refresh" update="editAlbumList " action="#{editCollectionBean.refresh}" icon="ui-icon-refresh">
               
            </p:commandButton>
        </h:form>
        <p:link value = "Add New Album" outcome="/customerFolder/addalbum" /><br />
        <p:link value="Go Home" outcome="/index" /><br />
        <p:link value="Logout" outcome="/logout" />
    </h:body>
</html>

